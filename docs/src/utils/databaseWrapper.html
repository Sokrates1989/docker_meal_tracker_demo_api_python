<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
<meta name="generator" content="pdoc3 0.11.1">
<title>src.utils.databaseWrapper API documentation</title>
<meta name="description" content="DatabaseWrapper module for handling all database interactions …">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/sanitize.min.css" integrity="sha512-y1dtMcuvtTMJc1yPgEqF0ZjQbhnc/bFhyvIyVNb9Zk5mIGtqVaAB1Ttl28su8AvFMOY0EwRbAe+HCLqj6W7/KA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/13.0.0/typography.min.css" integrity="sha512-Y1DYSb995BAfxobCkKepB1BqJJTPrOp3zPL74AWFugHHmmdcvO+C48WLrUOlhGMc0QG7AE3f7gmvvcrmX2fDoA==" crossorigin>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:1.5em;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:2em 0 .50em 0}h3{font-size:1.4em;margin:1.6em 0 .7em 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .2s ease-in-out}a:visited{color:#503}a:hover{color:#b62}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900;font-weight:bold}pre code{font-size:.8em;line-height:1.4em;padding:1em;display:block}code{background:#f3f3f3;font-family:"DejaVu Sans Mono",monospace;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em 1em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul ul{padding-left:1em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js" integrity="sha512-D9gUyxqja7hBtkWpPWGt9wfbfaMGVt9gnyCvYa+jojwwPHLCzUm5i8rpk7vD7wNee9bA35eYIjobYPaQuKS1MQ==" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => {
hljs.configure({languages: ['bash', 'css', 'diff', 'graphql', 'ini', 'javascript', 'json', 'plaintext', 'python', 'python-repl', 'rust', 'shell', 'sql', 'typescript', 'xml', 'yaml']});
hljs.highlightAll();
})</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>src.utils.databaseWrapper</code></h1>
</header>
<section id="section-intro">
<p>DatabaseWrapper module for handling all database interactions.</p>
<p>This module provides the <code><a title="src.utils.databaseWrapper.DatabaseWrapper" href="#src.utils.databaseWrapper.DatabaseWrapper">DatabaseWrapper</a></code> class, which is responsible for all interactions with the database. It provides
methods for accessing different repositories (e.g., users, meals, days) and performs operations such as connecting to the
database and validating tokens.</p>
<h2 id="repositories">Repositories</h2>
<ul>
<li>UserRepo: Handles user-related operations.</li>
<li>DayRepo: Handles day-related operations.</li>
<li>MealRepo: Handles meal-related operations.</li>
<li>MealTypeRepo: Handles meal type-related operations.</li>
<li>DayMealRepo: Handles day-meal-related operations.</li>
</ul>
<p>Usage example:</p>
<pre><code># Import the DatabaseWrapper class
import databaseWrapper as DatabaseWrapper

# Initialize the database wrapper
db_wrapper = DatabaseWrapper.DatabaseWrapper()

# Access repositories
user_repo = db_wrapper.getUserRepo()
meal_repo = db_wrapper.getMealRepo()

# Validate a token
is_valid = db_wrapper.isTokenValid("someToken")
</code></pre>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="src.utils.databaseWrapper.DatabaseWrapper"><code class="flex name class">
<span>class <span class="ident">DatabaseWrapper</span></span>
</code></dt>
<dd>
<div class="desc"><p>Wrapper class for all interactions with the database.</p>
<p>This class establishes a connection with the database and provides access to various repositories
(user, meal, day, etc.) for performing read and write operations. It also handles tasks like token validation
and managing encryption keys.</p>
<h2 id="attributes">Attributes</h2>
<dl>
<dt><strong><code>dbConnection</code></strong></dt>
<dd>MySQL database connection object.</dd>
<dt><strong><code>dbCursor</code></strong></dt>
<dd>MySQL database cursor used to execute SQL queries.</dd>
<dt><strong><code>validToken</code></strong></dt>
<dd>The predefined token used for authentication.</dd>
<dt><strong><code>encryptionKey</code></strong></dt>
<dd>The encryption key used for user data encryption.</dd>
</dl>
<p>Initializes the DatabaseWrapper by establishing a connection to the database
and setting the database cursor, token, and encryption key from the configuration file.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class DatabaseWrapper:
    &#34;&#34;&#34;
    Wrapper class for all interactions with the database.

    This class establishes a connection with the database and provides access to various repositories
    (user, meal, day, etc.) for performing read and write operations. It also handles tasks like token validation
    and managing encryption keys.

    Attributes:
        dbConnection: MySQL database connection object.
        dbCursor: MySQL database cursor used to execute SQL queries.
        validToken: The predefined token used for authentication.
        encryptionKey: The encryption key used for user data encryption.
    &#34;&#34;&#34;

    def __init__(self):
        &#34;&#34;&#34;
        Initializes the DatabaseWrapper by establishing a connection to the database
        and setting the database cursor, token, and encryption key from the configuration file.
        &#34;&#34;&#34;
        # Get database credentials from the config file.
        config_file_pathAndName = os.path.join(os.path.dirname(__file__), &#34;..&#34;, &#34;..&#34;, &#34;config.txt&#34;)
        with open(config_file_pathAndName) as config_file:
            config_array = json.load(config_file)

        # Establish the database connection.
        self.dbConnection = mysql.connector.connect(
            host=config_array[&#34;database&#34;][&#34;host&#34;],
            user=config_array[&#34;database&#34;][&#34;user&#34;],
            password=config_array[&#34;database&#34;][&#34;password&#34;],
            database=config_array[&#34;database&#34;][&#34;database&#34;],
            port=config_array[&#34;database&#34;][&#34;port&#34;]
        )
        self.dbCursor = self.dbConnection.cursor(buffered=True)  # Buffered to fix unread result error.
        self.validToken = config_array[&#34;authentication&#34;][&#34;token&#34;]
        self.encryptionKey = config_array[&#34;authentication&#34;][&#34;encryption_key&#34;]

    def updateOwnClassVars(self):
        &#34;&#34;&#34;
        Updates class variables like the database connection and cursor by reloading
        credentials from the configuration file.
        &#34;&#34;&#34;
        config_file_pathAndName = os.path.join(os.path.dirname(__file__), &#34;..&#34;, &#34;..&#34;, &#34;config.txt&#34;)
        with open(config_file_pathAndName) as config_file:
            config_array = json.load(config_file)

        # Re-establish the database connection.
        self.dbConnection = mysql.connector.connect(
            host=config_array[&#34;database&#34;][&#34;host&#34;],
            user=config_array[&#34;database&#34;][&#34;user&#34;],
            password=config_array[&#34;database&#34;][&#34;password&#34;],
            database=config_array[&#34;database&#34;][&#34;database&#34;],
            port=config_array[&#34;database&#34;][&#34;port&#34;]
        )
        self.dbCursor = self.dbConnection.cursor(buffered=True)

        print(&#34;Database: Updated own class vars&#34;)

    def getUserRepo(self) -&gt; UserRepo.UserRepo:
        &#34;&#34;&#34;
        Returns an instance of the UserRepo class.

        Returns:
            UserRepo: An instance of the UserRepo class.
        &#34;&#34;&#34;
        return UserRepo.UserRepo(self)

    def getDayRepo(self) -&gt; DayRepo.DayRepo:
        &#34;&#34;&#34;
        Returns an instance of the DayRepo class.

        Returns:
            DayRepo: An instance of the DayRepo class.
        &#34;&#34;&#34;
        return DayRepo.DayRepo(self)

    def getMealRepo(self) -&gt; MealRepo.MealRepo:
        &#34;&#34;&#34;
        Returns an instance of the MealRepo class.

        Returns:
            MealRepo: An instance of the MealRepo class.
        &#34;&#34;&#34;
        return MealRepo.MealRepo(self)

    def getMealTypeRepo(self) -&gt; MealTypeRepo.MealTypeRepo:
        &#34;&#34;&#34;
        Returns an instance of the MealTypeRepo class.

        Returns:
            MealTypeRepo: An instance of the MealTypeRepo class.
        &#34;&#34;&#34;
        return MealTypeRepo.MealTypeRepo(self)

    def getDayMealRepo(self) -&gt; DayMealRepo.DayMealRepo:
        &#34;&#34;&#34;
        Returns an instance of the DayMealRepo class.

        Returns:
            DayMealRepo: An instance of the DayMealRepo class.
        &#34;&#34;&#34;
        return DayMealRepo.DayMealRepo(self)

    def isTokenValid(self, token: str) -&gt; bool:
        &#34;&#34;&#34;
        Validates whether the provided token matches the validToken.

        Args:
            token (str): The token to be validated.

        Returns:
            bool: True if the token is valid, False otherwise.
        &#34;&#34;&#34;
        return token == self.validToken</code></pre>
</details>
<h3>Methods</h3>
<dl>
<dt id="src.utils.databaseWrapper.DatabaseWrapper.getDayMealRepo"><code class="name flex">
<span>def <span class="ident">getDayMealRepo</span></span>(<span>self) ‑> dayMealRepo.DayMealRepo</span>
</code></dt>
<dd>
<div class="desc"><p>Returns an instance of the DayMealRepo class.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>DayMealRepo</code></dt>
<dd>An instance of the DayMealRepo class.</dd>
</dl></div>
</dd>
<dt id="src.utils.databaseWrapper.DatabaseWrapper.getDayRepo"><code class="name flex">
<span>def <span class="ident">getDayRepo</span></span>(<span>self) ‑> dayRepo.DayRepo</span>
</code></dt>
<dd>
<div class="desc"><p>Returns an instance of the DayRepo class.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>DayRepo</code></dt>
<dd>An instance of the DayRepo class.</dd>
</dl></div>
</dd>
<dt id="src.utils.databaseWrapper.DatabaseWrapper.getMealRepo"><code class="name flex">
<span>def <span class="ident">getMealRepo</span></span>(<span>self) ‑> mealRepo.MealRepo</span>
</code></dt>
<dd>
<div class="desc"><p>Returns an instance of the MealRepo class.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>MealRepo</code></dt>
<dd>An instance of the MealRepo class.</dd>
</dl></div>
</dd>
<dt id="src.utils.databaseWrapper.DatabaseWrapper.getMealTypeRepo"><code class="name flex">
<span>def <span class="ident">getMealTypeRepo</span></span>(<span>self) ‑> mealTypeRepo.MealTypeRepo</span>
</code></dt>
<dd>
<div class="desc"><p>Returns an instance of the MealTypeRepo class.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>MealTypeRepo</code></dt>
<dd>An instance of the MealTypeRepo class.</dd>
</dl></div>
</dd>
<dt id="src.utils.databaseWrapper.DatabaseWrapper.getUserRepo"><code class="name flex">
<span>def <span class="ident">getUserRepo</span></span>(<span>self) ‑> userRepo.UserRepo</span>
</code></dt>
<dd>
<div class="desc"><p>Returns an instance of the UserRepo class.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>UserRepo</code></dt>
<dd>An instance of the UserRepo class.</dd>
</dl></div>
</dd>
<dt id="src.utils.databaseWrapper.DatabaseWrapper.isTokenValid"><code class="name flex">
<span>def <span class="ident">isTokenValid</span></span>(<span>self, token: str) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Validates whether the provided token matches the validToken.</p>
<h2 id="args">Args</h2>
<dl>
<dt><strong><code>token</code></strong> :&ensp;<code>str</code></dt>
<dd>The token to be validated.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>bool</code></dt>
<dd>True if the token is valid, False otherwise.</dd>
</dl></div>
</dd>
<dt id="src.utils.databaseWrapper.DatabaseWrapper.updateOwnClassVars"><code class="name flex">
<span>def <span class="ident">updateOwnClassVars</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Updates class variables like the database connection and cursor by reloading
credentials from the configuration file.</p></div>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="src.utils" href="index.html">src.utils</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="src.utils.databaseWrapper.DatabaseWrapper" href="#src.utils.databaseWrapper.DatabaseWrapper">DatabaseWrapper</a></code></h4>
<ul class="two-column">
<li><code><a title="src.utils.databaseWrapper.DatabaseWrapper.getDayMealRepo" href="#src.utils.databaseWrapper.DatabaseWrapper.getDayMealRepo">getDayMealRepo</a></code></li>
<li><code><a title="src.utils.databaseWrapper.DatabaseWrapper.getDayRepo" href="#src.utils.databaseWrapper.DatabaseWrapper.getDayRepo">getDayRepo</a></code></li>
<li><code><a title="src.utils.databaseWrapper.DatabaseWrapper.getMealRepo" href="#src.utils.databaseWrapper.DatabaseWrapper.getMealRepo">getMealRepo</a></code></li>
<li><code><a title="src.utils.databaseWrapper.DatabaseWrapper.getMealTypeRepo" href="#src.utils.databaseWrapper.DatabaseWrapper.getMealTypeRepo">getMealTypeRepo</a></code></li>
<li><code><a title="src.utils.databaseWrapper.DatabaseWrapper.getUserRepo" href="#src.utils.databaseWrapper.DatabaseWrapper.getUserRepo">getUserRepo</a></code></li>
<li><code><a title="src.utils.databaseWrapper.DatabaseWrapper.isTokenValid" href="#src.utils.databaseWrapper.DatabaseWrapper.isTokenValid">isTokenValid</a></code></li>
<li><code><a title="src.utils.databaseWrapper.DatabaseWrapper.updateOwnClassVars" href="#src.utils.databaseWrapper.DatabaseWrapper.updateOwnClassVars">updateOwnClassVars</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.11.1</a>.</p>
</footer>
</body>
</html>
